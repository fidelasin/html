

<div class="container">
          




<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
<div class="modal-dialog modal-fullscreen">
  <div class="modal-content">
    <div class="modal-header">
      <h5 class="modal-title" id="nameHead"></h5>
      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
    </div>
    <div class="modal-body">
      
      
      <div class="card card-body">
        <form id="ajaxForm" name="ajaxForm">
        <input type="hidden" class="form-control" name="customerbearer" id="customerbearer" placeholder="">

          <input type="hidden" class="form-control" name="id" id="id" placeholder="" >


<div class="form-group col-xs-12 col-sm-12">
  <label for="" class="control-label">order</label>
  <input type="text" class="form-control" name="order" id="order" placeholder="" >
</div>
<div class="form-group col-xs-12 col-sm-12">
  <label for="" class="control-label">name</label>
  <input type="text" class="form-control" name="name" id="name" placeholder="">
</div>       
<div class="form-group col-xs-12 col-sm-12">
  <label for="" class="control-label">address</label>
  <input type="text" class="form-control" name="address" id="address" placeholder="">
</div>    
<div class="form-group col-xs-12 col-sm-12">
  <label for="" class="control-label">phone</label>
  <input type="text" class="form-control" name="phone" id="phone" placeholder="">
</div>    
<div class="form-group col-xs-12 col-sm-12">
  <label for="" class="control-label">ean</label>
  <input type="text" class="form-control" name="ean" id="ean" placeholder="">
</div>    
<div class="form-group col-xs-12 col-sm-12">
  <label for="" class="control-label">customerprice</label>
  <input type="text" class="form-control" name="customerprice" id="customerprice" placeholder="">
</div>    
<div class="form-group col-xs-12 col-sm-12">
  <label for="" class="control-label">customerpiece</label>
  <input type="text" class="form-control" name="customerpiece" id="customerpiece" placeholder="">
</div>    
<div class="form-group col-xs-12 col-sm-12">
  <label for="" class="control-label">price</label>
  <input type="text" class="form-control" name="price" id="price" placeholder="">
</div>    
<div class="form-group col-xs-12 col-sm-12">
  <label for="" class="control-label">date</label>
  <input type="text" class="form-control" name="date" id="date" placeholder="">
</div>    
</form>
    </div>
  </div>
                
  
    <div class="modal-footer">
      <button type="button" id="duzenle" name="duzenle" class="btn btn-primary" data-bs-dismiss="modal">Düzenle</button>
      <button type="button" id="delete" name="delete" class="btn btn-danger" data-bs-dismiss="modal">Sil</button>
      <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Kapat</button>
    </div>
  </div>
</div>
</div>






<div class="modal fade" id="exampleModalDetail" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-fullscreen">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="nameHead"></h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        
        
        <div class="card card-body">
          <form id="ajaxFormDetail" name="ajaxFormDetail">
          <input type="text" class="form-control" name="customerbearerDetail" id="customerbearerDetail" placeholder="">
  
            <input type="text" class="form-control" name="idDetail" id="idDetail" placeholder="" >


  <div class="form-group col-xs-12 col-sm-12">
    <label for="" class="control-label">name</label>
    <input type="text" class="form-control" name="nameDetail" id="nameDetail" placeholder="">
  </div>       
  <div class="form-group col-xs-12 col-sm-12">
    <label for="" class="control-label">surname</label>
    <input type="text" class="form-control" name="surnameDetail" id="surnameDetail" placeholder="">
  </div>    
  <div class="form-group col-xs-12 col-sm-12">
    <label for="" class="control-label">email</label>
    <input type="text" class="form-control" name="emailDetail" id="emailDetail" placeholder="">
  </div>    
  <div class="form-group col-xs-12 col-sm-12">
    <label for="" class="control-label">password</label>
    <input type="text" class="form-control" name="passwordDetail" id="passwordDetail" placeholder="">
  </div>    
  <div class="form-group col-xs-12 col-sm-12">
    <label for="" class="control-label">telefon</label>
    <input type="text" class="form-control" name="telefonDetail" id="telefonDetail" placeholder="">
  </div>    
  <div class="form-group col-xs-12 col-sm-12">
    <label for="" class="control-label">site</label>
    <input type="text" class="form-control" name="siteDetail" id="siteDetail" placeholder="">
  </div>    
  <div class="form-group col-xs-12 col-sm-12">
    <label for="" class="control-label">role</label>
    <input type="text" class="form-control" name="roleDetail" id="roleDetail" placeholder="">
  </div>    
  <div class="form-group col-xs-12 col-sm-12">
    <label for="" class="control-label">date</label>
    <input type="text" class="form-control" name="dateDetail" id="dateDetail" placeholder="">
  </div>  
  
  </form>
      </div>
    </div>
                  
    
      <div class="modal-footer">
        <button type="button" id="duzenleDetail" name="duzenleDetail" class="btn btn-primary" data-bs-dismiss="modal">Düzenle</button>
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Kapat</button>
      </div>
    </div>
  </div>
  </div>
  




  



   
   <div class="d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom">
      <h1 class="h2">Users</h1>

    </div>
    <div class="table-responsive">


     


<table id="tabletest" class="display " style="width:100%">
  <thead>
    <tr>
      <th>Sıra</th>
      <th>name</th>
      <th>phone</th>
      <th>email</th>
      <th>site</th>
      <th>setting</th>
      </tr>
</thead></table>
<script type="text/javascript" >

$(document).ready(function() {

$('#tabletest').DataTable( {
  "language": {
          "url": "//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/Turkish.json"
      },
  "processing": true,
  "serverSide": true, 
  "stateSave": true,
  "ajax": {
    "url": "/api/v1/userget/allsite",
    "dataSrc": "data",
    "headers": {
      "Authorization": "Bearer <%= locals.session.bearertoken %>"
     },
  },

  "orderable": false,
      "order": [ 0, 'asc' ],
      "aoColumnDefs": [
        { "bSortable": false, "aTargets": [0,4] } 
        ],
 
      
      'scrollCollapse': false,

 

      'lengthMenu':[[3,50,100],[3,50,100]],
      searching:true,
   //  sort:false,

  "columns": [
  { "data" : "sira" },
    { "data" : "name" },
    { "data" : "phone" },
    { "data" : "email" },
    { "data" : "site" },
    { "data" : "settings" }
  ]
});
 



$(document).on("click", ".orderModalDetail", function () {
  const id = $(this).data('id');
  const customerbearer = $(this).data('bearer');
   $.get({ 
url: '/api/v1/user/get/'+id, 
headers:{
'Authorization':'Bearer '+customerbearer,
      }}).then(element => {
        $('#nameDetail').val(element.name);
        $('#surnameDetail').val(element.surname);
        $('#emailDetail').val(element.email);
        $('#passwordDetail').val(element.password);
        $('#telefonDetail').val(element.telefon);
        $('#siteDetail').val(element.site);
        $('#roleDetail').val(element.role);
        $('#dateDetail').val(element.date);
        $('#idDetail').val(element._id);
        $('#customerbearerDetail').val(customerbearer);
       
     });

    });

    
    
$("#duzenleDetail").click(function(event) {
    event.preventDefault();
    const  customerbearer = document.getElementById('customerbearerDetail').value;


    var form = $('#ajaxFormDetail');
    var method = 'POST';
    var url = '/api/v1/user/edit';
    var jsonData = $(form).serializeObject();
    console.log(jsonData);
    $.ajax({
      url: url,
      headers: {
          'Authorization':'Bearer '+customerbearer,
      },
      method: 'POST',
      dataType: 'json',
      data: jsonData,
      success: function(data){
        console.log('succes: '+data);
        $('#ajaxForm')[0].reset();
        $('#tabletest').DataTable().ajax.reload(null, false);
      }
    });
  });

  

$(document).on("click", ".orderModal", function () {
  const id = $(this).data('id');
  const customerbearer = $(this).data('bearer');

  $.get({ 
url: '/api/v1/order/get/'+id, 
headers:{
'Authorization':'Bearer '+customerbearer,
      }}).then(element => {
        $('#order').val(element.order);
        $('#name').val(element.name);
        $('#address').val(element.address);
        $('#phone').val(element.phone);
        $('#ean').val(element.ean);
        $('#customerprice').val(element.customerprice);
        $('#customerpiece').val(element.customerpiece);
        $('#price').val(element.price);
        $('#date').val(element.date);
        $('#id').val(element._id);
        $('#customerbearer').val(customerbearer);
       
     });

    });

   
    

$(document).on("click", ".productModal", function () {
  const id = $(this).data('id');
  const customerbearer = $(this).data('bearer');

  $.get({ 
url: '/api/v1/products/get/'+id, 
headers:{
'Authorization':'Bearer '+customerbearer,
      }}).then(element => {
        $('#order').val(element.order);
        $('#name').val(element.name);
        $('#address').val(element.address);
        $('#phone').val(element.phone);
        $('#ean').val(element.ean);
        $('#customerprice').val(element.customerprice);
        $('#customerpiece').val(element.customerpiece);
        $('#price').val(element.price);
        $('#date').val(element.date);
        $('#id').val(element._id);
        $('#customerbearer').val(customerbearer);
       
     });

    });



  
$("#duzenle").click(function(event) {
    event.preventDefault();
  const  customerbearer = document.getElementById('customerbearer').value;

    var form = $('#ajaxForm');
    var method = 'POST';
    var url = '/api/v1/order/edit';
    var jsonData = $(form).serializeObject();
    console.log(jsonData);
    $.ajax({
      url: url,
      headers: {
          'Authorization':'Bearer '+customerbearer,
      },
      method: 'POST',
      dataType: 'json',
      data: jsonData,
      success: function(data){
        console.log('succes: '+data);
        $('#ajaxForm')[0].reset();
        $('#tabletest').DataTable().ajax.reload(null, false);
      }
    });
  });


  
    $('#delete').click(function () {
  
     if(confirm("Bilgiler Silinecek Geri Dönülemez, Onaylıyormusunuz?")){
      var customerbearer = document.getElementById('customerbearer').value;
      var id = document.getElementById('id').value;
      alert(customerbearer);
      alert(id);
     $.get({ 
  url: '/api/v1/order/ordercancel/'+id, 
headers:{
          'Authorization':'Bearer '+customerbearer,
        }}).then(res => {
          console.log("ddede")
      $('#tabletest').DataTable().ajax.reload(null, false);
      });
      }
       else{ return false; }
    
    });




});




</script> 
</div>


